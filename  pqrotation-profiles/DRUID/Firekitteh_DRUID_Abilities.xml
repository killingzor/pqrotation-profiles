<?xml version="1.0" encoding="utf-8" ?><DRUID><Ability><Name>Rake</Name><Default>false</Default><SpellID>1822</SpellID><Actions></Actions><Lua>local rake, _, _, _, _, _, raketimer = UnitDebuffID(&amp;quot;target&amp;quot;, 1822, &amp;quot;PLAYER&amp;quot;)


if rake ~= nil then
	if raketimer - GetTime() &amp;lt; 4 then
		return true
	end
else
	return true
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Rip</Name><Default>false</Default><SpellID>1079</SpellID><Actions></Actions><Lua>local rip, _, _, _, _, _, riptimer = UnitDebuffID(&amp;quot;target&amp;quot;, 1079, &amp;quot;PLAYER&amp;quot;)
local ripCP = GetComboPoints(&amp;quot;player&amp;quot;, &amp;quot;target&amp;quot;)
local riphealth = 100 * UnitHealth(&amp;quot;target&amp;quot;) / UnitHealthMax(&amp;quot;target&amp;quot;)




if rip ~= nil then
	if riphealth &amp;gt; 60 then
		if ripCP == 5 then
			if riptimer - GetTime() &amp;lt;4 then
				return true
			end
		end
	end
else
	if ripCP == 5 then
		return true
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Shred</Name><Default>false</Default><SpellID>5221</SpellID><Actions></Actions><Lua>--Variables
local Fire = PQR_FireTarget(&amp;quot;Target&amp;quot;)
local Facing = PQR_FireMangle(&amp;quot;Player&amp;quot;,&amp;quot;Focus&amp;quot;,&amp;quot;FocusTarget&amp;quot;)
-- Combo Points
local CP = GetComboPoints(&amp;quot;player&amp;quot;, &amp;quot;target&amp;quot;)
--local Fire = PQR_FireTarget(&amp;quot;Target&amp;quot;)
--Buffs/Debuffs/Timers
local rake = UnitDebuffID(&amp;quot;Target&amp;quot;, 1822, &amp;quot;Player&amp;quot;)
local Incarnation = UnitBuffID(&amp;quot;Player&amp;quot;, 102543)
local inCD = GetSpellCooldown(102543)
local BS = select(4,UnitBuffID(&amp;quot;player&amp;quot;, 106951))
local incarnKnown = IsSpellKnown(106731)


if incarnKnown then
	if Facing == true then
		return false
	elseif PQR_NotBehindTarget() or Fire then
		return false
	elseif CP == 5 then
		return false
	elseif BS and inCD == 0 then
		return false
	elseif rake ~= nil and not BS and not Incarnation then
		return true
	end
elseif not incarnKnown then
	if Facing == true then
		return false
	elseif PQR_NotBehindTarget() or Fire then
		return false
	elseif CP == 5 then
		return false
	elseif rake ~= nil then
		return true
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Mangle</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>-- Variables
local Fire = PQR_FireTarget(&amp;quot;Target&amp;quot;)
local Facing = PQR_FireMangle(&amp;quot;Player&amp;quot;,&amp;quot;Focus&amp;quot;,&amp;quot;FocusTarget&amp;quot;)
--Buffs/Debuffs
local fbCP = GetComboPoints(&amp;quot;Player&amp;quot;, &amp;quot;Target&amp;quot;)
local rake = UnitDebuffID(&amp;quot;Target&amp;quot;, 1822, &amp;quot;Player&amp;quot;)
local Incarnation = UnitBuffID(&amp;quot;Player&amp;quot;, 102543)
local BS = select(4,UnitBuffID(&amp;quot;player&amp;quot;, 106951))
local incarnKnown = IsSpellKnown(106731)
--Misc

--if Facing == true then
--	CastSpellByName(tostring(GetSpellInfo(33876)))
if incarnKnown then
	if BS and not Incarnation then
		return false
	elseif BS and Incarnation then
		return false
	elseif not BS and Incarnation then
		return false
	elseif PQR_NotBehindTarget() or Fire and fbCP ~= 5 and rake ~= nil and not BS and not Incarnation then
		CastSpellByName(tostring(GetSpellInfo(33876)))
--	elseif PQR_NotBehindTarget() or Fire and fbCP ~= 5 and rake ~= nil and not Incarnation then
--		CastSpellByName(tostring(GetSpellInfo(33876)))
	elseif Facing == true and rake ~= nil and fbCP &amp;lt; 5 then
		CastSpellByName(tostring(GetSpellInfo(33876)))
	end
elseif not incarnKnown then
	if Facing == true and fbCP &amp;lt; 5 and rake ~= nil then
		CastSpellByName(tostring(GetSpellInfo(33876)))
	elseif PQR_NotBehindTarget() or Fire and fbCP ~= 5 and rake ~= nil then
		CastSpellByName(tostring(GetSpellInfo(33876)))
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>False</SkipUnknown></Ability><Ability><Name>Faerie Fire (Feral)</Name><Default>false</Default><SpellID>770</SpellID><Actions></Actions><Lua>--Misc
local hasTarget = UnitExists(&amp;quot;Target&amp;quot;)
local Enemy = UnitCanAttack(&amp;quot;Player&amp;quot;,&amp;quot;Target&amp;quot;)
local isDead = UnitIsDead(&amp;quot;Target&amp;quot;)

if hasTarget and Enemy and not isDead then
	local waBuff = select(4,UnitDebuffID(&amp;quot;Target&amp;quot;,113746))
	
	if not waBuff or waBuff &amp;lt; 3 then
		return true
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Savage Roar</Name><Default>false</Default><SpellID>52610</SpellID><Actions></Actions><Lua>local srTimer = select(7,UnitBuffID(&amp;quot;player&amp;quot;, 52610))
local CP = GetComboPoints(&amp;quot;player&amp;quot;, &amp;quot;target&amp;quot;)

if not srTimer then
  return true
elseif srTimer - GetTime() &amp;lt; 4 and CP &amp;gt; 3 then
  return true
elseif srTimer - GetTime() &amp;lt; 2 and CP &amp;lt; 3 then
  return true  
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Ferocious Bite</Name><Default>false</Default><SpellID>22568</SpellID><Actions></Actions><Lua>local fbrip, _, _, _, _, _, fbtimer = UnitDebuffID(&amp;quot;target&amp;quot;, 1079, &amp;quot;PLAYER&amp;quot;)
local fbCP = GetComboPoints(&amp;quot;player&amp;quot;, &amp;quot;target&amp;quot;)
local fbhealth = 100 * UnitHealth(&amp;quot;target&amp;quot;) / UnitHealthMax(&amp;quot;target&amp;quot;)
local fbenergy = UnitPower(&amp;quot;player&amp;quot;) / UnitPowerMax(&amp;quot;player&amp;quot;) * 100


if fbhealth &amp;lt;=60 then
	if fbrip ~= nil then
		if fbCP == 5 then
			return true
		end
	end
else
	if fbrip ~= nil then
		if fbtimer - GetTime() &amp;gt; 8 and fbenergy &amp;gt;= 50 and fbCP == 5 then
			return true
		end
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Berserk</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>--Buffs
local _,_,_,TF = UnitBuffID(&amp;quot;player&amp;quot;, 5217)
local _, _, _, BS = UnitBuffID(&amp;quot;player&amp;quot;, 106951)
local BSstart, BSduration = GetSpellCooldown(106951)
--Cooldowns
local BScooldown = (BSstart + BSduration - GetTime())
--Energy/Health/Level Checks
local bsEnergy = UnitPower(&amp;quot;player&amp;quot;) / UnitPowerMax(&amp;quot;player&amp;quot;) * 100
local bsHealth = UnitHealth(&amp;quot;target&amp;quot;) / UnitHealthMax(&amp;quot;target&amp;quot;) * 100
local levelcheck = UnitLevel(&amp;quot;target&amp;quot;)
local spell = select(2,GetSpellBookItemInfo(tostring(GetSpellInfo(106951))))

if TF == nil then
	return false
else
--		if BScooldown &amp;gt; 0 and (PQR_FireBoss == true) then
		if BScooldown &amp;gt; 0 then
			return false
		else
			-- if bsHealth &amp;lt; 96 then
			CastSpellByName(tostring(GetSpellInfo(106951)))
			-- end
		end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>False</SkipUnknown></Ability><Ability><Name>Tigers Fury</Name><Default>false</Default><SpellID>5217</SpellID><Actions></Actions><Lua>local tfEnergy = UnitPower(&amp;quot;player&amp;quot;)
local BSstart, BSduration = GetSpellCooldown(106951)
local BScooldown = (BSstart + BSduration - GetTime())

if BScooldown &amp;gt; 25 and tfEnergy &amp;lt;= 45 then
	return true
elseif BScooldown &amp;lt; 1 and tfEnergy &amp;lt;= 45 then
	return true
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Swipe</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local BS = select(4,UnitBuffID(&amp;quot;Player&amp;quot;, 106951))
local energy = UnitPower(&amp;quot;player&amp;quot;)


if BS ~= nil then
	if energy &amp;gt;= 22 then
		CastSpellByName(tostring(GetSpellInfo(62078)))
	end
else
	if energy &amp;gt;= 45 then
		CastSpellByName(tostring(GetSpellInfo(62078)))
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>False</SkipUnknown></Ability><Ability><Name>Ravage!</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local Incarnation = UnitBuffID(&amp;quot;Player&amp;quot;, 102543)
local fbCP = GetComboPoints(&amp;quot;Player&amp;quot;, &amp;quot;Target&amp;quot;)

if Incarnation ~= nil and fbCP &amp;lt; 5 then
	CastSpellByName(tostring(GetSpellInfo(6785)))
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>--- special events ---</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>-- Avoid sudden death on Ultraxion
local fadingtime = select(7,UnitDebuffID(&amp;quot;player&amp;quot;,110070))
if fadingtime and fadingtime - GetTime() &amp;lt; 1.3 then RunMacroText(&amp;quot;/click ExtraActionButton1&amp;quot;) end 

-- Avoid Hour of Twilight on Ultraxion, Delete next 3 lines if you are working as tank
local channelSpell, _, _, _, _, endTime = UnitCastingInfo(&amp;quot;boss1&amp;quot;)
if channelSpell == GetSpellInfo(109417) and endTime/1000 - GetTime() &amp;lt; 1.3 
then RunMacroText(&amp;quot;/click ExtraActionButton1&amp;quot;) end 

-- Try to aim on Darkmoon Faerie Cannon
local canontime = select(7,UnitBuffID(&amp;quot;player&amp;quot;,102116))
if canontime and canontime - GetTime() &amp;lt; 1.15 then CancelUnitBuff(&amp;quot;player&amp;quot;,&amp;quot;Magic Wings&amp;quot;) end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>-- Load Lua --</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if PQR_RotationStarted == true then
  PQR_RotationStarted = false
  if PQR_LoadLua ~= nil then
    if PQR_LoadLua(&amp;quot;PQR_Firepong.lua&amp;quot;) == false then 
       PQR_WriteToChat(&amp;quot;Put the file PQR_Firepong.lua in the Data file for this profile to work properly!!!&amp;quot;, &amp;quot;Error&amp;quot;)
       PQR_RotationStop()
        return true
     end
   end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Racials</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>--Race Checks
local Troll = IsSpellKnown(26297)
local Orc = IsSpellKnown(20572)
--Cooldowns
local tCD = GetSpellCooldown(26297)
local oCD = GetSpellCooldown(20572)
--Buffs
local BS = select(4,UnitBuffID(&amp;quot;player&amp;quot;, 106951))

if Troll == true then
	if BS == nil then
		return false
	else
		if tCD == 0 then
			CastSpellByName(tostring(GetSpellInfo(26297)))
--			CastSpellByID(74497)
		end
	end
end

if Orc == true then
	if BS == nil then
		return false
	else
		if oCD == 0 then
			CastSpell(FindSpellBookSlotBySpellID(26297),&amp;quot;Player&amp;quot;)
		end
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>False</SkipUnknown></Ability><Ability><Name>Potions</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>--Potion Counts
local tvPot = GetItemCount(58145) --Potion of the Tol&amp;apos;Vir
local vPot = GetItemCount(58091) --Volcanic Potion
local gbPot = GetItemCount(58146) --Golemblood Potion
local ePot = GetItemCount(58090) --Earthen Potion
--Potion timers
local tvCD = GetItemCooldown(58145) --Potion of the Tol&amp;apos;Vir Timer
local vCD = GetItemCooldown(58091) --Volcanic Potion Timer
local gbCD = GetItemCooldown(58146) --Golemblood Potion timer
local eCD = GetItemCooldown(58090) --Earthen Potion Timer
--Buffs
local BS = select(4,UnitBuffID(&amp;quot;player&amp;quot;, 50334)) --Berserk Druid Buff

if tvPot == nil then
	return false
else
	if tvPot ~= nil and tvCD == 0 then
		if BS == nil then
			return false
		else
			UseItemByName(58145)
		end
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Profession Buffs</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>--Profession Cooldown&amp;apos;s/Known Spells
local herbKnown = IsSpellKnown(74497)
local herbCD = GetSpellCooldown(74497) --Herbalism Spell - Lifebloom
local itemCD = PQR_ItemCD()
--Buffs
local BS = select(4,UnitBuffID(&amp;quot;player&amp;quot;, 106951)) --Berserk Buff

if herbKnown == true then
	if herbCD == 0 then
		if BS == nil then
			return false
		else
			CastSpell(FindSpellBookSlotBySpellID(74497),&amp;quot;Player&amp;quot;)
		end
	end
end

local slot = {10,13,14}

if itemCD == true and BS ~= nil then
	for i=1,#slot do
		local item = GetInventoryItemID(&amp;quot;player&amp;quot;, slot[i])
		UseItemByName(item)
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Incarnation</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local hasTarget = UnitExists(&amp;quot;Target&amp;quot;)
local Enemy = UnitCanAttack(&amp;quot;Player&amp;quot;,&amp;quot;Target&amp;quot;)
local isDead = UnitIsDead(&amp;quot;Target&amp;quot;)

if hasTarget and Enemy and not isDead then
	local inKnown = IsSpellKnown(106731)
	local inStart,inDuration = GetSpellCooldown(106731)
	local inCD = inStart + inDuration - GetTime()
	
	if inKnown and inCD &amp;lt; 1 then
		local BS = select(4,UnitBuffID(&amp;quot;player&amp;quot;, 106951))
		local Incarnation = UnitBuffID(&amp;quot;Player&amp;quot;, 102543)

		if BS ~= nil and Incarnation == nil then
			CastSpellByName(tostring(GetSpellInfo(106731)))
		end
	end
end</Lua><RecastDelay>750</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability></DRUID>